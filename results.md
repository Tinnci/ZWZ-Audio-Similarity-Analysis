 luoyi    cmp_zwz   3.11.10   45.63s⠀   python cmp_adele.py                               pwsh   79  22:00:30 
2024-09-17 22:00:54,153 - INFO - 成功加载 ZWZ_Adele_1.wav，采样率: 48000 Hz
2024-09-17 22:00:54,181 - INFO - 成功加载 ZWZ_Adele_2.wav，采样率: 48000 Hz
2024-09-17 22:00:54,195 - INFO - 成功加载 ZWZ_Adele_3.wav，采样率: 48000 Hz
2024-09-17 22:00:54,208 - INFO - 成功加载 ZWZ_Adele_groundtruth.wav，采样率: 48000 Hz
2024-09-17 22:01:28,107 - INFO - 计算得到的时移量: -3949
2024-09-17 22:01:28,107 - INFO - audio1 与 groundtruth 对齐完成。
2024-09-17 22:02:04,365 - INFO - 计算得到的时移量: 824
2024-09-17 22:02:04,366 - INFO - audio2 与 groundtruth 对齐完成。
2024-09-17 22:02:42,045 - INFO - 计算得到的时移量: 5040
2024-09-17 22:02:42,046 - INFO - audio3 与 groundtruth 对齐完成。
2024-09-17 22:02:42,414 - INFO - audio1 的特征提取完成。
2024-09-17 22:02:42,522 - INFO - audio2 的特征提取完成。
2024-09-17 22:02:42,640 - INFO - audio3 的特征提取完成。
2024-09-17 22:02:43,209 - INFO - audio1 的相似度计算完成。
2024-09-17 22:02:43,739 - INFO - audio2 的相似度计算完成。
2024-09-17 22:02:44,249 - INFO - audio3 的相似度计算完成。

--- 相似度结果 ---
audio1 与 Groundtruth 的综合相似度得分: 1137.6584
audio2 与 Groundtruth 的综合相似度得分: 1028.9112
audio3 与 Groundtruth 的综合相似度得分: 1104.5651
 luoyi    cmp_zwz   3.11.10   1m 56.001s⠀   python cmp_RDWPS.py                           pwsh   79  22:02:44 
2024-09-17 22:03:25,870 - INFO - 成功加载 ZWZ_RDWPS_1.wav，采样率: 48000 Hz
2024-09-17 22:03:25,894 - INFO - 成功加载 ZWZ_RDWPS_2.wav，采样率: 48000 Hz
2024-09-17 22:03:25,909 - INFO - 成功加载 ZWZ_RDWPS_3.wav，采样率: 48000 Hz
2024-09-17 22:03:25,922 - INFO - 成功加载 ZWZ_RDWPS_groundtruth.wav，采样率: 48000 Hz
2024-09-17 22:03:48,744 - INFO - 计算得到的时移量: -4184
2024-09-17 22:03:48,745 - INFO - audio1 与 groundtruth 对齐完成。
2024-09-17 22:04:11,540 - INFO - 计算得到的时移量: -7894
2024-09-17 22:04:11,541 - INFO - audio2 与 groundtruth 对齐完成。
2024-09-17 22:04:36,305 - INFO - 计算得到的时移量: -5492
2024-09-17 22:04:36,306 - INFO - audio3 与 groundtruth 对齐完成。
2024-09-17 22:04:36,590 - INFO - audio1 的特征提取完成。
2024-09-17 22:04:36,665 - INFO - audio2 的特征提取完成。
2024-09-17 22:04:36,751 - INFO - audio3 的特征提取完成。
2024-09-17 22:04:37,164 - INFO - audio1 的相似度计算完成。
2024-09-17 22:04:37,486 - INFO - audio2 的相似度计算完成。
2024-09-17 22:04:37,812 - INFO - audio3 的相似度计算完成。

--- 相似度结果 ---
audio1 与 Groundtruth 的综合相似度得分: 930.2406
audio2 与 Groundtruth 的综合相似度得分: 890.0686
audio3 与 Groundtruth 的综合相似度得分: 867.6716
 luoyi    cmp_zwz   3.11.10   1m 16.36s⠀   python cmp_CQ_1.py                             pwsh   79  22:04:38 
2024-09-17 22:05:13,576 - INFO - 成功加载 ZWZ_CQ_1_1.wav，采样率: 48000 Hz
2024-09-17 22:05:13,601 - INFO - 成功加载 ZWZ_CQ_1_2.wav，采样率: 48000 Hz
2024-09-17 22:05:13,615 - INFO - 成功加载 ZWZ_CQ_1_3.wav，采样率: 48000 Hz
2024-09-17 22:05:13,634 - INFO - 成功加载 ZWZ_CQ_1_groundtruth.wav，采样率: 48000 Hz
2024-09-17 22:06:04,959 - INFO - 计算得到的时移量: 2844
2024-09-17 22:06:04,960 - INFO - audio1 与 groundtruth 对齐完成。
2024-09-17 22:06:56,292 - INFO - 计算得到的时移量: -1703
2024-09-17 22:06:56,293 - INFO - audio2 与 groundtruth 对齐完成。
2024-09-17 22:07:59,641 - INFO - 计算得到的时移量: -3742
2024-09-17 22:07:59,642 - INFO - audio3 与 groundtruth 对齐完成。
2024-09-17 22:08:00,097 - INFO - audio1 的特征提取完成。
2024-09-17 22:08:00,246 - INFO - audio2 的特征提取完成。
2024-09-17 22:08:00,390 - INFO - audio3 的特征提取完成。
2024-09-17 22:08:01,134 - INFO - audio1 的相似度计算完成。
2024-09-17 22:08:01,723 - INFO - audio2 的相似度计算完成。
2024-09-17 22:08:02,416 - INFO - audio3 的相似度计算完成。

--- 相似度结果 ---
audio1 与 Groundtruth 的综合相似度得分: 1266.3131
audio2 与 Groundtruth 的综合相似度得分: 1165.5577
audio3 与 Groundtruth 的综合相似度得分: 1298.4807
 luoyi    cmp_zwz   3.11.10   2m 53.364s⠀   python cmp_CQ_2.py                            pwsh   79  22:08:02 
2024-09-17 22:08:31,227 - INFO - 成功加载 ZWZ_CQ_2_1.wav，采样率: 48000 Hz
2024-09-17 22:08:31,246 - INFO - 成功加载 ZWZ_CQ_2_2.wav，采样率: 48000 Hz
2024-09-17 22:08:31,254 - INFO - 成功加载 ZWZ_CQ_2_3.wav，采样率: 48000 Hz
2024-09-17 22:08:31,271 - INFO - 成功加载 ZWZ_CQ_1_groundtruth.wav，采样率: 48000 Hz
2024-09-17 22:08:54,870 - INFO - 计算得到的时移量: 35427
2024-09-17 22:08:54,871 - INFO - audio1 与 groundtruth 对齐完成。
2024-09-17 22:09:20,341 - INFO - 计算得到的时移量: 34212
2024-09-17 22:09:20,343 - INFO - audio2 与 groundtruth 对齐完成。
2024-09-17 22:09:44,312 - INFO - 计算得到的时移量: 33283
2024-09-17 22:09:44,313 - INFO - audio3 与 groundtruth 对齐完成。
2024-09-17 22:09:44,523 - INFO - audio1 的特征提取完成。
2024-09-17 22:09:44,564 - INFO - audio2 的特征提取完成。
2024-09-17 22:09:44,607 - INFO - audio3 的特征提取完成。
2024-09-17 22:09:44,796 - INFO - audio1 的相似度计算完成。
2024-09-17 22:09:44,937 - INFO - audio2 的相似度计算完成。
2024-09-17 22:09:45,157 - INFO - audio3 的相似度计算完成。

--- 相似度结果 ---
audio1 与 Groundtruth 的综合相似度得分: 733.3759
audio2 与 Groundtruth 的综合相似度得分: 719.5274
audio3 与 Groundtruth 的综合相似度得分: 742.8096

------

### **分析相似度的方法：**

该代码通过多步处理和分析音频文件来计算它们与参考音频（Ground Truth）的相似度。它利用了多种音频特征和相似度度量方法，包括**MFCC**、**频谱对比度**、**小波变换**等。以下是详细的分析方法解释。

#### 1. **加载与归一化音频**

- **加载音频 (`load_audio`)**：首先，代码加载音频文件，并将其统一到一个固定的采样率（在此为48kHz）。
- **归一化 (`normalize_audio`)**：使用RMS（均方根值）归一化音频信号的响度，确保不同音频文件之间的幅度一致。这样可以减少不同设备录制的音频文件因响度不同带来的影响。

#### 2. **时移对齐 (`align_audio`)**

- 使用互相关函数计算两个音频文件之间的时移量，确定音频信号的对齐位置。时移是为了消除录音设备不同步造成的误差。该方法通过最大化互相关找到最相关的时间偏移。
- 通过对齐后的音频进行特征提取，使得音频信号能够在相同的起点进行分析，保证后续相似度计算的准确性。

#### 3. **特征提取**

代码从对齐后的音频中提取了以下三种特征：

- **MFCC（梅尔频率倒谱系数） (`extract_mfcc`)**：
  - MFCC是一种常用的音频特征，尤其在语音和音乐分析中。它通过将音频信号分解为多个频率带并提取能量系数，能够有效地描述音频的频谱形状和声音特征。
  - 提取到的MFCC特征还会进行标准化处理，以消除不同维度之间的量纲差异。
- **频谱对比度 (`extract_spectral_contrast`)**：
  - 频谱对比度是一种衡量不同频率带的能量差异的特征，反映了音频信号中不同频率成分的分布情况。它对于区分乐器、声源具有较强的辨识度。
  - 同样，对提取到的频谱对比度进行标准化。
- **小波变换 (`extract_wavelet`)**：
  - 小波变换是一种多尺度分析方法，能够捕捉音频信号的局部特征。通过小波分解，音频信号可以分为多个频带层次，并提取每个层次的均值和标准差作为特征。
  - 小波变换用于捕捉音频信号的时频局部变化，适合分析带有时变特征的音频。

#### 4. **相似度计算**

代码通过不同的方法对音频的特征序列计算相似度：

- **动态时间规整（DTW） (`compute_dtw_distance`)**：
  - DTW是一种用于对比两个时间序列的算法，即使两个序列长度不同或有时移。它能够找到最优的匹配路径，使得时间序列之间的总差异最小化。
  - 代码使用DTW来计算MFCC和频谱对比度特征之间的相似度，适用于音频长度不一致的情况。
- **欧氏距离 (`compute_euclidean_distance`)**：
  - 对于小波变换特征，使用了欧氏距离来衡量两个特征向量之间的差异。欧氏距离用于衡量两个向量在多维空间中的直线距离。

#### 5. **综合相似度计算 (`compute_composite_similarity`)**

- 相似度的最终得分是根据MFCC、频谱对比度和小波变换的相似度得分，通过加权求和得到的。
- 代码中设置的权重分别为：MFCC占0.4，频谱对比度占0.4，小波变换占0.2。这些权重可以根据实际需求进行调整，以反映不同特征的重要性。

#### 6. **结果输出**

- 通过计算每个设备音频与Ground Truth的综合相似度得分，程序输出每个设备在不同场景下与Ground Truth的相似度，并显示每个设备的最终相似度得分。

### **相似度计算流程总结**

1. **预处理**：音频加载、采样率统一和响度归一化，确保不同音频文件之间的基础条件一致。
2. **时移对齐**：通过互相关确定时移量，并对齐音频信号，消除录音设备不同步带来的影响。
3. **特征提取**：从对齐后的音频中提取三种特征（MFCC、频谱对比度、小波变换），全面描述音频信号的时频特性。
4. **相似度计算**：使用DTW算法和欧氏距离分别计算各特征的相似度，度量音频信号与Ground Truth的相似性。
5. **综合相似度得分**：通过加权求和，计算最终的综合相似度得分，以反映音频的总体相似度。

这种方法能够全面评估音频文件的相似性，考虑了时频域特征、局部特征及序列长度差异。